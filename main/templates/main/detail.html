{% extends 'base.html' %}
{% load static %}
{% block content %}


    <h3>{{post.title}}</h3>
    <a href="{% url 'users:mypage' user_id=post.writer.id %}">ì‘ì„±ì : {{post.writer}}</a>
        | ë‚œì´ë„ : {% if post.difficulty == 'easy' %}ì‰¬ì›€
                {% elif post.difficulty == 'normal' %}ë³´í†µ
                {% elif post.difficulty == 'hard' %}ì–´ë ¤ì›€
                {% endif %}
        | ì„¸ì…˜ ë‚ ì§œ : {{post.pub_date}}

        <a href="{% url 'main:likes' post.id %}">
            {% if user in post.like.all %} â¤ï¸ {% else %} ğŸ¤ {% endif %}
        </a>
        {{post.like_count}}ê°œ

        <p>
            {% for tag in post.tags.all %}
                <a href="{% url 'main:tag-posts' tag.id %}">#{{ tag.name }}</a>
            {% endfor %}
        </p>
        <hr/>
        <p>{{post.content}}</p>

        <!-- ë¡œê·¸ì¸í•œ ìœ ì €ê°€ ì‘ì„±í•œ ê¸€ë§Œ ìˆ˜ì •/ì‚­ì œ ê°€ëŠ¥ -->
        {% if post.writer == user %}  
            <a href="{% url 'main:edit' post.id %}">ê¸€ ìˆ˜ì •í•˜ê¸°</a>
            <a href="{% url 'main:delete' post.id %}">ê¸€ ì‚­ì œí•˜ê¸°</a>
        {% endif %}
    <br>


    <div class="comment_container">

        <div class="comment_form">
            <h2></h2>
            <form action="{% url 'main:detail' post.id %}" method="POST">
                {% csrf_token %} <!-- Djagoì—ì„œ ë³´ì•ˆì„ ìœ„í•´ ë°˜ë“œì‹œ í¬í•¨í•´ì•¼ í•˜ëŠ” ìš”ì†Œ-->
                ëŒ“ê¸€ ì“°ê¸° : <input type="text" name="content">
                <input type="submit" name="submit">
            </form>
        </div>

        <div class="comment_list">
            {% for comment in comments %}
            <hr>
            <h4>ì‘ì„±ì : {{comment.writer}}</h4>
            <p>ë‚´ìš© : {{comment.content}}</p>
            <p>{{comment.pub_date}}</p>

            <!-- ì‚­ì œ ë²„íŠ¼ (ìœ ì € ë³¸ì¸ ëŒ“ê¸€ì¼ ë•Œë§Œ ëœ¬ë‹¤)-->
            {% if request.user.is_authenticated and comment.writer == request.user %}
            <form action="{% url 'main:delete_comment' comment.id %}" method="POST">
                {% csrf_token %}
                <button type="submit">ì‚­ì œ</button>
            </form>
            {% endif %}

            {% endfor %}
        </div>

    </div>


{% endblock %}